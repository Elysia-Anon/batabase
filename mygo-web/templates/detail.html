{% extends 'layout.html' %}

{% block content %}
<nav aria-label="breadcrumb">
  <ul>
    <li><a href="/">é¦–é¡µ</a></li>
    <li>{{ band.name }}</li>
  </ul>
</nav>

<hgroup>
    <h1>{{ band.name }}</h1>
    <h2>é˜Ÿé•¿: {{ band.leader_name }} | æˆå‘˜æ•°: {{ band.member_count }}äºº</h2>
</hgroup>

{% if stats %}
<article>
    <header><strong>ğŸ“Š å®æ—¶ç²‰ä¸ç”»åƒ (æ•°æ®æ¥è‡ªè§†å›¾ View)</strong></header>
    <div class="grid" style="text-align: center;">
        <div>
            <h3>{{ stats['ç²‰ä¸æ€»æ•°'] }}</h3>
            <small>æ€»å…³æ³¨äººæ•°</small>
        </div>
        <div>
            <h3>{{ stats['å¹³å‡å¹´é¾„'] | round(1) }} å²</h3>
            <small>å¹³å‡å¹´é¾„</small>
        </div>
        <div>
            <h3>{{ stats['å¥³æ€§ç²‰ä¸æ•°'] }}</h3>
            <small>å¥³æ€§ç²‰ä¸</small>
        </div>
        <div>
            <h3>{{ stats['æœ¬ç§‘ç²‰ä¸æ•°'] }}</h3>
            <small>æœ¬ç§‘åŠä»¥ä¸Š</small>
        </div>
    </div>
</article>
{% endif %}

<h3>ğŸ¤ æˆå‘˜åå•</h3>
<figure>
    <table role="grid">
        <thead>
            <tr>
                <th scope="col">å§“å</th>
                <th scope="col">æ‹…å½“</th>
                <th scope="col">æ€§åˆ«</th>
                <th scope="col">å¹´é¾„</th>
                <th scope="col">åŠ å…¥æ—¶é—´</th>
            </tr>
        </thead>
        <tbody>
            {% for m in members %}
            <tr>
                <th scope="row">{{ m.name }}</th>
                <td>
                    <mark>{{ m.role }}</mark>
                </td>
                <td>{{ m.gender }}</td>
                <td>{{ m.age }}</td>
                <td>{{ m.join_date }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</figure>

<hr>

{% if user and user.type == 'fan' %}
    <article>
        <header><strong>ğŸ“ å‘è¡¨ä¹è¯„ (æ¨¡æ‹Ÿè§¦å‘å™¨)</strong></header>
        <form action="/add_review" method="POST">
            <input type="hidden" name="album_id" value="1"> 
            <div class="grid">
                <label>
                    è¯„åˆ† (0-10)
                    <input type="number" name="score" min="0" max="10" step="0.1" required placeholder="9.5">
                </label>
                <label>
                    è¯„è®ºå†…å®¹
                    <input type="text" name="comment" placeholder="ç¥ä¸“ï¼å¹çˆ†ï¼" required>
                </label>
            </div>
            <button type="submit">æäº¤å¹¶è§¦å‘æ¦œå•æ›´æ–°</button>
        </form>
    </article>
{% elif not user %}
    <div style="text-align: center; padding: 20px; background: #f0f0f0; border-radius: 8px; color: black;">
        ğŸ’¡ æƒ³è¦æ‰“åˆ†ï¼Ÿè¯· <a href="/login">ç™»å½•æ­Œè¿·è´¦å·</a>
    </div>
{% endif %}

{% endblock %}
